.property

    h3 #{ gettext("Food composition table codes") }

    source-locale(src="localFoodDataSources.nutrientTablesSource")

    .form-group(ng-repeat='(id, code) in itemDefinition.local.nutrientTableCodes')
        label.col-xs-3.control-label(for="input-{{ id }}-code") {{ id }}
        .col-xs-9
            .input-group
                ui-select(id='input-{{ id }}-code'
                ng-model="itemDefinition.local.nutrientTableCodes[id]" title='Select nutrient record code')
                    ui-select-match(placeholder='e.g. 10968')
                        span(ng-bind="($select.selected.description)")
                    ui-select-choices(refresh="nutrientCodeSection.findNutrientTableRecords(id, $select.search)" refresh-delay="500"
                    repeat="item.id as item in (nutrientCodeSection.nutrientTableRecords | filter: {description: $select.search})")
                        span(ng-bind="item.description")
                .input-group-btn
                    button.btn.btn-default(type="button" ng-click="nutrientCodeSection.removeTable(id)")
                        i(class="fa fa-remove")

    .form-group(ng-hide="nutrientCodeSection.buttonDisabled()")
        .col-xs-12
            .intake-dropdown(ng-class="{open: nutrientCodeSection.dropDownOpened}")
                button.intake-btn(type="button" ng-click="nutrientCodeSection.toggleDropDown()")
                    span #{ gettext("add_nutrient_code") }
                    i(class="fa fa-caret-down")
                ul.intake-dropdown-menu
                    li(ng-repeat="item in nutrientCodeSection.filteredTables()")
                        a(href="" ng-click="nutrientCodeSection.addTable(item.id)")
                            span {{item.id}}

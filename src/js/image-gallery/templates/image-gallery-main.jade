.search-input-group
    search-input(ng-model="searchQuery")
    .search-input-addon
        file-button(on-change="onFilesChange(fileList)")
            button(type="button")
                i.fa.fa-plus
    .search-input-addon(uib-dropdown auto-close="outsideClick")
        button(type="button" uib-dropdown-toggle id="tools-dropdown")
            i.fa.fa-angle-down
        ul.dropdown-menu.dropdown-menu-right(uib-dropdown-menu aria-labelledby="tools-dropdown")
            li
                a(href="" ng-click="selectAll()") Select all
            li
                a(href="" ng-click="deselectAll()" ng-show="getImagesSelected()") Deselect all
            li(ng-show="copiedTags.length > 0 && getImagesSelected()")
                a(href="" ng-click="pasteTagsToSelected()") Paste tags to selected
            li
                a(href="" ng-click="toggleShowDeleted()") {{ showDeleted ? 'Hide deleted' : 'Show deleted' }}
            li.divider(ng-show="getImagesSelected()")
            li
                // Fixme: You can't remove deleted images
                a(href="" ng-click="removeSelected()" ng-show="getImagesSelected()") Remove selected

file-drop-zone(on-dropped="onFilesChange(fileList)")
    .container-fluid.intk-gallery(on-scrolled-to-bottom="loadImages" ng-hide="getSearchQueryNotEmpty()")

        p(ng-show="images.length == 0 || loadingImages") No images found

        .intk-gallery-item(ng-repeat="item in images track by $index")
            .intk-gallery-item-img
                img-loader(src="item.src")
                .intk-gallery-item-blank(ng-class="{'visible': item.selected || item.loading}")
                    div.pull-right(uib-dropdown)
                        button.btn.btn-default.btn-tools(uib-dropdown-toggle)
                            i.fa.fa-ellipsis-v
                        ul.dropdown-menu.dropdown-menu-right(uib-dropdown-menu)
                            li(ng-hide="item.deleted")
                                a(href="" ng-click="copyTags(item)") Copy tags
                            li.divider(ng-hide="item.deleted")
                            li(ng-hide="item.deleted")
                                a(href="" ng-click="removeItem(item)") Remove image
                            li(ng-show="item.deleted")
                                a(href="" ng-click="restoreItem(item)") Restore image

                    button.btn-select(ng-click="select(item)")
                        i.fa(ng-class="{'fa-check-circle-o': item.getItemSelected(), 'fa-circle-o': item.getItemDeselected(), 'fa-spinner fa-spin': item.loading }")

            .intk-gallery-item-tools
                span.label.label-danger(ng-show="item.deleted") Deleted
                tag-input(tags="item.tags" disabled="item.loading" ng-hide="item.deleted")

        p(ng-show="loadingImages") Loading...

    .container-fluid.intk-gallery(on-scrolled-to-bottom="searchImages" ng-show="getSearchQueryNotEmpty()")

        p(ng-show="searchedImages.length == 0 || loadingImages") No images found

        .intk-gallery-item(ng-repeat="item in searchedImages track by $index")
            .intk-gallery-item-img
                img-loader(src="item.src")
                .intk-gallery-item-blank(ng-class="{'visible': item.selected || item.loading}")
                    div.pull-right(uib-dropdown)
                        button.btn.btn-default.btn-tools(uib-dropdown-toggle)
                            i.fa.fa-ellipsis-v
                        ul.dropdown-menu.dropdown-menu-right(uib-dropdown-menu)
                            li(ng-hide="item.deleted")
                                a(href="" ng-click="copyTags(item)") Copy tags
                            li.divider(ng-hide="item.deleted")
                            li(ng-hide="item.deleted")
                                a(href="" ng-click="removeItem(item)") Remove image
                            li(ng-show="item.deleted")
                                a(href="" ng-click="restoreItem(item)") Restore image

                    button.btn-select(ng-click="select(item)")
                        i.fa(ng-class="{'fa-check-circle-o': item.getItemSelected(), 'fa-circle-o': item.getItemDeselected(), 'fa-spinner fa-spin': item.loading }")

            .intk-gallery-item-tools
                span.label.label-danger(ng-show="item.deleted") Deleted
                tag-input(tags="item.tags" disabled="item.loading" ng-hide="item.deleted")

        p(ng-show="loadingImages") Loading...
